---
layout: default
title: "Media"
permalink: /media/
classes: media-page
hide_captions: false
---

<style>
  /* Force card borders with maximum specificity */
  .media-page .media-card {
    min-width: 0 !important;
    background: #fff !important;
    border: 3px solid #333 !important;
    border-radius: 8px !important;
    padding: 1rem !important;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2) !important;
    margin-bottom: 1rem !important;
    align-self: start !important;
  }
  
  /* Grid with small row units for masonry effect */
  .media-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)) !important;
    grid-auto-rows: 10px !important; /* Smaller units for better fit */
    gap: 0.75rem !important;
    align-items: start !important;
  }
  
  /* Tighter spacing between elements */
  .media-page .media-card h3 { margin: 0.1rem 0 0.25rem; font-size: 1rem; }
  .media-page .publication-meta { margin: 0 0 0.1rem !important; color: #666; font-size: 0.9rem; }
  .media-page .media-summary { margin-top: 0.25rem; }
  
  /* Teaser image styling */
  .media-page .media-card .teaser-image {
    width: 100%;
    height: auto;
    border-radius: 4px;
    margin-bottom: 0.5rem;
  }
</style>

<h1>Media</h1>

<section class="media-grid">
  {% assign media_items = site.media | sort: "date" | reverse %}
  {% for item in media_items %}
    <article class="media-card" style="border: 2px solid #ccc !important; background: #fff !important; padding: 1rem !important; border-radius: 8px !important; box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;">
      
      {% if item.date %}
        <p class="publication-meta" style="margin: 0 0 0.1rem !important;">
          <time datetime="{{ item.date | date_to_xmlschema }}">{{ item.date | date: "%B %Y" }}</time>
        </p>
      {% endif %}

      <h3 class="archive__item-title" style="margin: 0.1rem 0 0.25rem !important;">
        {% if item.link %}<a href="{{ item.link }}">{{ item.title }}</a>{% else %}{{ item.title }}{% endif %}
      </h3>

      {% if item.summary or item.excerpt %}
        <div class="media-summary">{{ item.summary | default: item.excerpt | markdownify }}</div>
      {% endif %}

      {% if item.header.teaser %}
        <img src="{{ site.baseurl }}/images/{{ item.header.teaser }}" alt="{{ item.title }}" class="teaser-image">
      {% endif %}

      <div class="media-embed">
        {% if page.hide_captions %}
          {{ item.content | replace: 'data-instgrm-captioned', '' }}
        {% else %}
          {{ item.content }}
        {% endif %}
      </div>
    </article>
  {% endfor %}
</section>

<script async src="https://www.instagram.com/embed.js"></script>
<script>
window.addEventListener('load', function() {
  function masonryLayout() {
    const grid = document.querySelector('.media-grid');
    const items = grid.querySelectorAll('.media-card');
    const rowHeight = 10; // Must match grid-auto-rows
    const gap = 12; // 0.75rem in pixels
    
    items.forEach(item => {
      // Reset any previous spanning
      item.style.gridRowEnd = 'auto';
      
      // Force layout calculation
      const rect = item.getBoundingClientRect();
      const height = rect.height;
      
      // Calculate how many 10px rows this item needs (including gap)
      const rowSpan = Math.ceil((height + gap) / (rowHeight + gap));
      
      // Apply the span
      item.style.gridRowEnd = `span ${rowSpan}`;
    });
  }
  
  // Run layout multiple times to ensure proper sizing
  function runLayout() {
    masonryLayout();
    setTimeout(masonryLayout, 100);  // Run again after brief delay
    setTimeout(masonryLayout, 500);  // And once more after embeds settle
  }
  
  if (window.instgrm && instgrm.Embeds) { 
    instgrm.Embeds.process();
    setTimeout(runLayout, 2000); // Wait for Instagram embeds to load
  } else {
    runLayout();
  }
  
  // Re-run layout on window resize
  window.addEventListener('resize', runLayout);
});
</script>